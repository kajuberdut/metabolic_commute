<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Metabolic Commute</title>
    <link rel="preload" href="fonts/anton-v27-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="fonts/lora-v37-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>

<body>

    <!-- VIEW: LEDGER (Home) -->
    <main id="view-ledger" class="view-section active">
        <h1>Metabolic Protocol<br><span
                style="font-size: 0.4em; color: var(--calm); display:block; margin-top:5px;">Efficiency //
                Longevity</span></h1>

        <h2>I. The Ledger</h2>
        <table>
            <thead>
                <tr>
                    <th class="col-day">Day</th>
                    <th>AM <span
                            style="font-weight:400; font-family:'Lora'; font-size:0.7em; color:#666;">(Output)</span>
                    </th>
                    <th>PM <span style="font-weight:400; font-family:'Lora'; font-size:0.7em; color:#666;">(Heat)</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="col-day">Mon</td>
                    <td><span class="urgent">REHIT</span></td>
                    <td><span class="calm">Sauna</span></td>
                </tr>
                <tr>
                    <td class="col-day">Tue</td>
                    <td>Rest</td>
                    <td>Family</td>
                </tr>
                <tr>
                    <td class="col-day">Wed</td>
                    <td><span class="urgent">REHIT</span></td>
                    <td><span class="calm">Sauna</span></td>
                </tr>
                <tr>
                    <td class="col-day">Thu</td>
                    <td>Rest</td>
                    <td>Family</td>
                </tr>
                <tr>
                    <td class="col-day">Fri</td>
                    <td><span class="urgent">REHIT</span></td>
                    <td><span class="calm">Sauna</span></td>
                </tr>
                <tr>
                    <td class="col-day">Sat</td>
                    <td>Rest</td>
                    <td>Rest</td>
                </tr>
                <tr>
                    <td class="col-day">Sun</td>
                    <td>Rest</td>
                    <td>Rest</td>
                </tr>
            </tbody>
        </table>

        <h2>II. Protocols</h2>
        <div class="phase-block" onclick="app.navTo('rehit')">
            <h3 style="margin-top:0;">AM: Sprint Protocol</h3>
            <p>15 minutes. 2x20s Max Effort Sprints. Glycogen depletion.</p>
            <button class="action-btn">Open Timer &rarr;</button>
        </div>

        <div class="phase-block" onclick="app.navTo('breathe')">
            <h3 style="margin-top:0;">PM: Heat Protocol</h3>
            <p>20 minutes sauna. Box breathing (4-4-4-4) required.</p>
            <button class="action-btn">Open Breather &rarr;</button>
        </div>
    </main>

    <!-- VIEW: REHIT TIMER -->
    <main id="view-rehit" class="view-section">
        <button class="btn-help" onclick="toggleHelp()">?</button>
        <div class="timer-container" id="rehit-display">
            <div class="timer-phase" id="timer-phase">READY</div>
            <!-- 15:00 -->
            <div class="timer-digits" id="timer-digits">REHIT</div>
            <div class="timer-next" id="timer-next">15 Minute Protocol</div>

            <div class="timer-controls">
                <button class="action-btn" id="btn-start" onclick="rehit.toggle()">START</button>
                <button class="action-btn" id="btn-reset" onclick="rehit.reset()"
                    style="border-color: var(--faint); color: #999;">RESET</button>
            </div>
            <div style="margin-top: 15px;">
                <label style="font-family: 'Anton', sans-serif; text-transform: uppercase;">
                    <input type="checkbox" id="chk-nosleep" style="transform: scale(1.5); margin-right: 10px;"> Prevent
                    Sleep
                </label>
            </div>
        </div>
    </main>

    <!-- VIEW: BREATHER -->
    <main id="view-breathe" class="view-section">
        <div class="breather-container" id="breather-container">
            <div class="breath-circle" id="breath-circle">
                <span id="breath-text">READY</span>
            </div>
        </div>
        <div class="breath-controls">
            <button class="action-btn" id="btn-breathe" onclick="breather.toggle()">START BREATHING</button>
            <p class="note" style="text-align: center; border: none; font-style: italic; color: #999;">4s In / 4s Hold /
                4s Out / 4s Hold</p>
        </div>
    </main>

    <!-- VIEW: STRENGTH -->
    <main id="view-strength" class="view-section">
        <h1>Strength</h1>
        <div class="placeholder-view">
            <h2>TBD</h2>
            <p>Coming Soon.</p>
        </div>
    </main>

    <dialog id="rehit-help-modal" class="modal-overlay">
        <div class="modal-content">
            <header class="modal-header">
                <h3>Protocol Manifest</h3>
                <button class="btn-close" onclick="toggleHelp()">Ã—</button>
            </header>

            <div class="modal-body">
                <section class="help-section">
                    <h4>01 // The Logic</h4>
                    <p>REHIT (Reduced Exertion HIIT) is not about burning calories while you bike. It is about
                        <strong>metabolic signaling</strong>. The two 20-second sprints are designed to instantly
                        deplete the glycogen (sugar) in your muscles. This triggers a "survival" signal that forces your
                        body to improve insulin sensitivity and VO2 max rapidly.
                    </p>
                </section>

                <section class="help-section">
                    <h4>02 // The Setup</h4>
                    <ul>
                        <li><strong>Equipment:</strong> Air Bike (Preferred) or any machine where you can safely exert
                            100% force without "spinning out."</li>
                        <li><strong>Hydration:</strong> Drink 16oz water <em>before</em> starting. Do not drink during
                            (too short).</li>
                        <li><strong>Safety:</strong> If you feel dizzy, stop immediately and sit down.</li>
                    </ul>
                </section>

                <section class="help-section">
                    <h4>03 // The Execution</h4>
                    <div class="ledger-row">
                        <span class="ledger-time">Warm Up</span>
                        <span class="ledger-desc">Lazy pace. Just move the joints.</span>
                    </div>
                    <div class="ledger-row urgent">
                        <span class="ledger-time">SPRINT (20s)</span>
                        <span class="ledger-desc"><strong>Maximum Effort.</strong> Close your eyes. Try to break the
                            handles. If you are pacing yourself, you are doing it wrong.</span>
                    </div>
                    <div class="ledger-row">
                        <span class="ledger-time">Recovery</span>
                        <span class="ledger-desc">Slow spin. Do not stop moving (flushes lactate).</span>
                    </div>
                    <div class="ledger-row calm">
                        <span class="ledger-time">Cooldown</span>
                        <span class="ledger-desc">Slow spin. Use double-inhale breathing to calm down.</span>
                    </div>
                </section>
            </div>
        </div>
    </dialog>

    <!-- NAVIGATION BAR -->
    <nav>
        <button onclick="app.navTo('ledger')" id="nav-ledger" class="active">Ledger</button>
        <button onclick="app.navTo('rehit')" id="nav-rehit">REHIT</button>
        <button onclick="app.navTo('breathe')" id="nav-breathe">Breathe</button>
        <button onclick="app.navTo('strength')" id="nav-strength">Strength</button>
    </nav>

    <script src="js/app.js" defer></script>

</body>

</html>